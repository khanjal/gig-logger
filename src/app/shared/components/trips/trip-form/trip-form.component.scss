@import "color-vars";

// Component-specific overrides and customizations
.trip-form {
    // Uses global .form-content class styles - apply via HTML classes instead of @extend
    margin-bottom: 1rem;
    min-width: 100px;
    width: 100%;
    padding: 0.5rem;
    
    @media (max-width: 480px) {
        padding: 0.25rem;
    }
}

// Address list styling - adds spacing below previous pickup addresses accordion
.address-list {
    margin-bottom: 1.5rem;
    
    @media (max-width: 768px) {
        margin-bottom: 1.25rem;
    }
    
    @media (max-width: 480px) {
        margin-bottom: 1rem;
    }
}

// Specific styling for the customer information section name field
.form-section:nth-child(4) { // Customer Information section
    .form-row {
        @media (max-width: 768px) {
            display: flex;
            gap: 0.5rem;
            
            app-search-input.field-full-width {
                flex: 1;
                width: auto !important;
                max-width: none !important;
                min-width: 0;
            }
            
            .toggle-button {
                flex-shrink: 0;
                margin-left: 0;
            }
        }
        
        @media (max-width: 480px) {
            gap: 0.375rem;
        }
    }
}

// Specific styling for odometer fields - ensure half width on all screen sizes
.form-row--halves {
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: nowrap !important;
    gap: 0.5rem;
    align-items: center;
    
    .form-field,
    mat-form-field {
        flex: 1 !important;
        width: calc(50% - 0.25rem) !important;
        max-width: calc(50% - 0.25rem) !important;
        min-width: 0 !important;
    }
    
    @media (max-width: 480px) {
        gap: 0.375rem;
        
        .form-field,
        mat-form-field {
            flex: 1 !important;
            width: calc(50% - 0.1875rem) !important;
            max-width: calc(50% - 0.1875rem) !important;
        }
    }
}

// Mobile responsive form field behavior
@media (max-width: 768px) {
    // All form fields should be full width on mobile unless they're in specific multi-field rows
    .form-row:not(.form-row--halves):not(.form-row--thirds) {
        .form-field {
            width: 100%;
            max-width: 100%;
            flex: 1 1 100%;
        }
        
        mat-form-field {
            width: 100%;
            max-width: 100%;
            flex: 1 1 100%;
        }
        
        app-search-input {
            width: 100%;
            max-width: 100%;
            flex: 1 1 100%;
        }
        
        .field-full-width {
            width: 100%;
            max-width: 100%;
            flex: 1 1 100%;
        }
    }
    
    // Form rows with buttons should keep fields and buttons on same row
    .form-row:has(.toggle-button) {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 0.5rem;
        
        .field-full-width,
        app-search-input {
            flex: 1;
            width: auto;
            max-width: none;
        }
        
        .toggle-button {
            flex-shrink: 0;
            width: 44px;
            height: 44px;
        }
    }
    
    // Special handling for Payment section with button-first layout
    .form-row {
        &:first-child .toggle-button:first-child {
            order: -1; // Ensure button appears first
            margin-right: 0.5rem;
        }
        
        // When button is first, following fields should share remaining space
        .toggle-button + .form-field {
            flex: 1;
            min-width: 0;
        }
        
        .form-field + .form-field {
            flex: 1;
            min-width: 0;
        }
    }
      // Halves layout - two fields side by side on mobile
    .form-row--halves {
        display: flex;
        gap: 0.5rem;
        flex-wrap: nowrap !important; // Ensure fields stay on same row
        
        .form-field {
            flex: 1 !important;
            width: calc(50% - 0.25rem) !important;
            max-width: calc(50% - 0.25rem) !important;
            min-width: 0; // Prevent overflow
        }
        
        mat-form-field {
            flex: 1 !important;
            width: calc(50% - 0.25rem) !important;
            max-width: calc(50% - 0.25rem) !important;
            min-width: 0; // Prevent overflow
        }
    }
    
    // Thirds layout - three fields side by side on mobile with adjusted widths
    .form-row--thirds {
        display: flex;
        gap: 0.25rem;
        
        .form-field {
            flex: 1;
            width: calc(33.333% - 0.17rem);
            max-width: calc(33.333% - 0.17rem);
            min-width: 70px;
        }
    }
    
    // Target search-input components specifically for full width behavior
    app-search-input {
        width: 100% !important;
        display: block !important;
        
        &.field-full-width {
            flex: 1 !important;
            max-width: none !important;
            min-width: 0 !important;
        }
    }
    
    // Ensure form rows with single search-input fields use full width
    .form-row:not(.form-row--halves):not(.form-row--thirds) {
        app-search-input {
            width: 100% !important;
            flex: 1 1 100% !important;
        }
    }
    
    // Special handling for Service, Region, Place, Type fields
    .form-row app-search-input[formControlName="service"],
    .form-row app-search-input[formControlName="region"], 
    .form-row app-search-input[formControlName="place"],
    .form-row app-search-input[formControlName="type"] {
        width: 100% !important;
        max-width: 100% !important;
        flex: 1 1 100% !important;
        display: block !important;
    }
}

@media (max-width: 480px) {
    // Even more compact on small mobile screens
    .form-row:has(.toggle-button) {
        gap: 0.375rem;
        
        .toggle-button {
            width: 40px;
            height: 40px;
            
            mat-icon {
                font-size: 18px;
            }
        }
    }
    
    // Adjust thirds layout for very small screens
    .form-row--thirds {
        gap: 0.125rem;
        
        .form-field {
            width: calc(33.333% - 0.08rem);
            max-width: calc(33.333% - 0.08rem);
            min-width: 60px;
              .mat-mdc-form-field {
                .mat-mdc-form-field-infix {
                    padding: 8px 0;
                }
            }
        }
    }
    
    // Ensure single fields with buttons are truly full width
    .form-row {
        &:not(.form-row--halves):not(.form-row--thirds) {
            .field-full-width,
            app-search-input {
                width: 100% !important;
                max-width: none !important;
                flex: 1 !important;
            }
        }
        
        // Special handling for name field specifically
        app-search-input.field-full-width {
            width: 100% !important;
            flex: 1 !important;
            min-width: 0 !important;
        }
    }
    
    app-search-input {
        width: 100% !important;
        max-width: 100% !important;
        
        &.field-full-width {
            width: 100% !important;
            flex: 1 !important;
        }    }
}

// Desktop styles - ensure field-full-width elements are properly sized on larger screens
@media (min-width: 769px) {
    // Ensure all field-full-width elements are truly full width on desktop
    .field-full-width,
    app-search-input.field-full-width {
        width: 100% !important;
        max-width: 100% !important;
        flex: 1 1 100% !important;
        display: block !important;
    }
    
    // Specific targeting for search input components
    .form-row app-search-input[formControlName="service"],
    .form-row app-search-input[formControlName="region"], 
    .form-row app-search-input[formControlName="place"],
    .form-row app-search-input[formControlName="type"],
    .form-row app-search-input[formControlName="name"] {
        width: 100% !important;
        max-width: 100% !important;
        flex: 1 1 100% !important;
        display: block !important;
    }
    
    // Ensure form rows without specific layout classes use full width
    .form-row:not(.form-row--halves):not(.form-row--thirds) {
        .form-field,
        mat-form-field,
        app-search-input {
            width: 100% !important;
            max-width: 100% !important;
            flex: 1 1 100% !important;
        }
        
        .field-full-width {
            width: 100% !important;
            max-width: 100% !important;
            flex: 1 1 100% !important;
        }
    }
    
    // Handle form rows with buttons - fields should still be full width minus button space
    .form-row:has(.toggle-button) {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        
        .field-full-width,
        app-search-input {
            flex: 1 !important;
            width: auto !important;
            max-width: none !important;
            min-width: 0 !important;
        }
        
        .toggle-button {
            flex-shrink: 0;
        }
    }
}

// Hide checkmarks in shift dropdown
::ng-deep .mat-mdc-option .mdc-list-item__primary-text {
    .mat-pseudo-checkbox {
        display: none !important;
    }
}

::ng-deep .mat-mdc-option {
    .mat-pseudo-checkbox,
    .mat-pseudo-checkbox-minimal {
        display: none !important;
    }
}

// Alternative approach - hide all option checkmarks globally for this component
::ng-deep mat-option {
    .mat-option-pseudo-checkbox {
        display: none !important;
    }
}