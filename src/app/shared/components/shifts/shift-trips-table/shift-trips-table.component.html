<mat-card class="trips-container" *ngIf="trips && trips.length > 0">
    <div class="header-container">
        <h2>
            Trips ({{ trips.length }})
        </h2>
        <button mat-mini-fab color="primary" class="button-right mini-button" (click)="viewTrips(trips)">
            <mat-icon>view_agenda</mat-icon>
        </button>
    </div>
    
    <div class='table-responsive'>
        <mat-table [dataSource]="trips">
            <ng-container matColumnDef="place">
                <mat-header-cell *matHeaderCellDef> Place </mat-header-cell>
                <mat-cell *matCellDef="let trip"> {{trip.place | truncate:15}} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="pickup">
                <mat-header-cell *matHeaderCellDef>Pickup</mat-header-cell>
                <mat-cell *matCellDef="let trip"> {{trip.pickupTime | noseconds}} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="dropoff">
                <mat-header-cell *matHeaderCellDef>Dropoff</mat-header-cell>
                <mat-cell *matCellDef="let trip"> {{trip.dropoffTime | noseconds}} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="total">
                <mat-header-cell *matHeaderCellDef> Total </mat-header-cell>
                <mat-cell *matCellDef="let trip" [ngClass]="{'tip-none': (trip.tip + trip.cash) === 0, 'tip-good': (trip.tip + trip.cash) >= 5}"> {{trip.total | currency}} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="name">
                <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>
                <mat-cell *matCellDef="let trip"> {{trip.name | truncate:10}} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="address">
                <mat-header-cell *matHeaderCellDef> Address </mat-header-cell>
                <mat-cell *matCellDef="let trip"> {{trip.endAddress | truncate:50}} </mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;" [ngStyle]="row.exclude && {'background-color': 'lightgrey'}" [ngClass]="row.exclude && 'strike'"></mat-row>
        </mat-table>
    </div>
    
    <!-- Mobile Card View -->
    <div class="mobile-cards">
        <div class="trip-card" *ngFor="let trip of trips" [ngClass]="{'excluded': trip.exclude}">
            <div class="card-header">
                <div class="trip-time">
                    <div class="pickup-time">{{trip.pickupTime | noseconds}}</div>
                    <div class="arrow">â†’</div>
                    <div class="dropoff-time">{{trip.dropoffTime | noseconds}}</div>
                </div>
                <div class="trip-earnings" [ngClass]="{'tip-none': (trip.tip + trip.cash) === 0, 'tip-good': (trip.tip + trip.cash) >= 5}">
                    {{trip.total | currency}}
                </div>
            </div>
            <div class="card-details">
                <div class="detail-item">
                    <div class="detail-label">Place</div>
                    <div class="detail-value">{{trip.place | truncate:20}}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Customer</div>
                    <div class="detail-value">{{trip.name | truncate:15}}</div>
                </div>
                <div class="detail-item address-full">
                    <div class="detail-label">Address</div>
                    <div class="detail-value">{{trip.endAddress | truncate:40}}</div>
                </div>
            </div>
        </div>
    </div>
</mat-card>