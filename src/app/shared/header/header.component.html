<!-- Mobile-First PWA Header Component -->
<header class="app-header">
  <!-- Main Toolbar -->
  <mat-toolbar class="main-toolbar">
    <!-- Menu Button -->
    <div class="toolbar-section toolbar-section--menu">
      <button (click)="toggleMenu()" 
              class="menu-button" 
              aria-label="Toggle menu"
              matTooltip="Menu"
              matTooltipPosition="below">
        <mat-icon>{{ isMenuOpen ? 'close' : 'menu' }}</mat-icon>
      </button>
    </div>
    
    <!-- Spacer -->
    <div class="toolbar-spacer"></div>
    
    <!-- Action Buttons -->
    <div class="toolbar-section toolbar-section--actions">
      <a routerLink="/" 
         class="action-button" 
         aria-label="Go to home page"
         matTooltip="Home"
         matTooltipPosition="below">
        <mat-icon>home</mat-icon>
      </a>
      
      <!-- Authenticated user navigation -->
      <ng-container *ngIf="isAuthenticated && defaultSheet">
        <a routerLink="/trips" 
           class="action-button" 
           aria-label="View trips"
           matTooltip="Trips"
           matTooltipPosition="below">
          <mat-icon>navigation</mat-icon>
          <span *ngIf="unsavedTripsCount > 0" class="notification-badge">{{ unsavedTripsCount }}</span>
        </a>
        <a routerLink="/shifts" 
           class="action-button" 
           aria-label="View shifts"
           matTooltip="Shifts"
           matTooltipPosition="below">
          <mat-icon>today</mat-icon>
          <span *ngIf="unsavedShiftsCount > 0" class="notification-badge">{{ unsavedShiftsCount }}</span>
        </a>
        <a routerLink="/metrics" 
           class="action-button" 
           aria-label="View metrics"
           matTooltip="Metrics"
           matTooltipPosition="below">
          <mat-icon>bar_chart</mat-icon>
        </a>
      </ng-container>
      
      <!-- Tools section for desktop only (before sync and setup) -->
      <ng-container *ngIf="isAuthenticated && defaultSheet">
        <div class="desktop-tools desktop-only">
          <a routerLink="/stats" 
             class="action-button" 
             aria-label="View statistics"
             matTooltip="Statistics"
             matTooltipPosition="below">
            <mat-icon>table_chart</mat-icon>
          </a>
          <a routerLink="/expenses"
             class="action-button"
             aria-label="View expenses"
             matTooltip="Expenses"
             matTooltipPosition="below">
            <mat-icon>receipt</mat-icon>
          </a>
          <button class="action-button action-button--disabled" matTooltip="Coming Soon" matTooltipPosition="below" disabled>
            <mat-icon>search</mat-icon>
          </button>
        </div>
      </ng-container>

      <!-- Sync Status Indicator (only show when authenticated) -->
      <ng-container *ngIf="isAuthenticated && defaultSheet">
        <app-sync-status-indicator></app-sync-status-indicator>
      </ng-container>

      <a routerLink="/setup" 
         class="action-button" 
         aria-label="Open settings"
         matTooltip="Settings"
         matTooltipPosition="below">
        <mat-icon>settings</mat-icon>
      </a>
    </div>
      </mat-toolbar>
  
  <!-- Slide-out Menu Overlay -->
  <div class="menu-overlay" 
       [class.menu-overlay--open]="isMenuOpen" 
       (click)="closeMenu()"
       role="dialog"
       aria-modal="true"
       aria-labelledby="menu-title">
    
    <nav class="slide-menu" 
         (click)="$event.stopPropagation()"
         role="navigation"
         aria-label="Main menu">
      
      <div class="menu-header">
        <div class="menu-header-content">
          <h2 id="menu-title" class="menu-title">Raptor Gig</h2>
          <div class="menu-tagline">Quick logs, big insights</div>
        </div>
        <button (click)="closeMenu()" 
                class="menu-close" 
                aria-label="Close menu">
          <mat-icon>close</mat-icon>
        </button>
      </div>
        <div class="menu-content">
        <!-- Always available navigation items -->
        <div class="menu-section">
          <h3 class="menu-section-title">Navigation</h3>
          <a routerLink="/" 
             (click)="closeMenu()"
             class="menu-item"
             aria-label="Go to home">
            <mat-icon class="menu-icon">home</mat-icon>
            <span class="menu-text">Home</span>
          </a>
          
          <!-- Authenticated user navigation items -->
          <ng-container *ngIf="isAuthenticated && defaultSheet">
            <a routerLink="/trips" 
               (click)="closeMenu()"
               class="menu-item"
               aria-label="View trips">
              <mat-icon class="menu-icon">navigation</mat-icon>
              <span class="menu-text">Trips</span>
            </a>
            <a routerLink="/shifts" 
               (click)="closeMenu()"
               class="menu-item"
               aria-label="View shifts">
              <mat-icon class="menu-icon">today</mat-icon>
              <span class="menu-text">Shifts</span>
            </a>
            <a routerLink="/metrics" 
               (click)="closeMenu()"
               class="menu-item"
               aria-label="View metrics">
              <mat-icon class="menu-icon">bar_chart</mat-icon>
              <span class="menu-text">Metrics</span>
            </a>
          </ng-container>
        </div>
        
        <!-- Tools section - only for authenticated users -->
        <div class="menu-section" *ngIf="isAuthenticated && defaultSheet">
          <h3 class="menu-section-title">Tools</h3>
          <a routerLink="/stats" 
             (click)="closeMenu()"
             class="menu-item"
             aria-label="View statistics">
            <mat-icon class="menu-icon">table_chart</mat-icon>
            <span class="menu-text">Statistics</span>
          </a>
          <a routerLink="/expenses"
             (click)="closeMenu()"
             class="menu-item"
             aria-label="View expenses">
            <mat-icon class="menu-icon">receipt</mat-icon>
            <span class="menu-text">Expenses</span>
          </a>
          <!-- Future menu items will go here -->
          <div class="menu-item menu-item--disabled">
            <mat-icon class="menu-icon">search</mat-icon>
            <span class="menu-text">Search</span>
            <span class="menu-badge">Coming Soon</span>
          </div>
        </div>
        
        <!-- Settings section - always available -->
        <div class="menu-section">
          <h3 class="menu-section-title">Settings</h3>
          <a routerLink="/setup" 
             (click)="closeMenu()"
             class="menu-item"
             aria-label="Open settings">
            <mat-icon class="menu-icon">settings</mat-icon>
            <span class="menu-text">Settings</span>
          </a>
        </div>
      </div>
      
    </nav>
  </div>
  
  <!-- Progress Indicator for PWA Loading -->
  <div class="loading-indicator" [class.loading-indicator--visible]="isLoading">
    <div class="loading-bar"></div>
  </div>
  
</header>

<!-- Main Content Area -->
<main class="main-content" role="main">
  <router-outlet></router-outlet>
</main>