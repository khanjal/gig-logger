<div class="flex flex-col gap-1">
  <!-- Shift Item -->
  <div *ngIf="itemType === 'shift'">
    <div class="flex flex-wrap items-center gap-2">
      <span class="px-2 py-0.5 bg-primary-500/20 rounded text-xs font-mono badge-id">ID: {{ item.rowId }}</span>
      <span class="font-semibold item-date" [class.line-through]="item.markedForDelete">{{ item.date }}</span>
      <span class="item-key text-sm">({{ item.key }})</span>
      <span *ngIf="item.markedForDelete" class="px-2 py-0.5 bg-error-500/20 rounded text-xs badge-delete">MARKED FOR DELETE</span>
    </div>
    <div class="flex items-center justify-between gap-2 mt-1">
      <div class="flex flex-wrap items-center gap-2 text-sm item-meta">
        <span *ngIf="item.totalTrips !== undefined">{{ item.totalTrips }} trips</span>
        <span *ngIf="item.start" class="item-time">{{ item.start }} - {{ item.finish }}</span>
      </div>
      <app-base-button *ngIf="diagnosticName === 'Shifts Missing Time Duration' && !item.fixed" 
              [fab]="true" 
              fabStyle="mini"
              color="primary" 
              (clicked)="onFixShiftDuration()"
              matTooltip="Fix duration">
        <mat-icon>build</mat-icon>
      </app-base-button>
    </div>
  </div>

  <!-- Trip Item -->
  <div *ngIf="itemType === 'trip'">
    <div class="flex flex-wrap items-center gap-2">
      <span class="px-2 py-0.5 bg-success-500/20 rounded text-xs font-mono badge-success">ID: {{ item.rowId }}</span>
      <span class="font-semibold item-date">{{ item.date }}</span>
      <span class="item-key text-sm">({{ item.key }})</span>
    </div>
    <div class="flex items-center justify-between gap-2 mt-1">
      <div class="flex flex-wrap items-center gap-2 text-sm">
        <span *ngIf="item.place" class="px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 rounded text-xs badge-purple">{{ item.place }}</span>
        <span *ngIf="item.name" class="px-2 py-0.5 bg-indigo-100 dark:bg-indigo-900/30 rounded text-xs badge-indigo">{{ item.name }}</span>
        <span *ngIf="item.exclude" class="px-2 py-0.5 bg-error-500/20 rounded text-xs badge-delete">EXCLUDED</span>
      </div>
      <app-base-button *ngIf="diagnosticName === 'Trips Missing Duration' && !item.fixed" 
              [fab]="true" 
              fabStyle="mini"
              color="primary" 
              (clicked)="onFixTripDuration()"
              matTooltip="Fix duration">
        <mat-icon>build</mat-icon>
      </app-base-button>
    </div>
    <div *ngIf="diagnosticName === 'Trips Missing Duration'" class="flex items-center gap-2 text-sm mt-1">
      <span *ngIf="item.pickupTime" class="item-time">{{ item.pickupTime }}</span>
      <span *ngIf="item.pickupTime && item.dropoffTime" class="item-time">-</span>
      <span *ngIf="item.dropoffTime" class="item-time">{{ item.dropoffTime }}</span>
      <span *ngIf="item.duration" class="px-2 py-0.5 bg-primary-500/20 rounded text-xs badge-id">{{ item.duration | durationFormat }}</span>
    </div>
  </div>

  <!-- Address Item -->
  <div *ngIf="itemType === 'address'" class="flex flex-wrap items-center gap-2">
    <span class="px-2 py-0.5 bg-warning-500/20 rounded text-xs font-mono badge-warning">ID: {{ item.rowId }}</span>
    <span class="font-semibold item-name" [class.line-through]="item.trips === 0">{{ item.address }}</span>
    <span *ngIf="item.trips !== undefined" class="text-sm item-meta">{{ item.trips }} trips</span>
    <span *ngIf="item.names && item.names.length > 0" class="text-sm item-meta-light">Names: {{ item.names.join(', ') }}</span>
  </div>

  <!-- Place Item -->
  <div *ngIf="itemType === 'place'">
    <div class="flex flex-wrap items-center gap-2">
      <span class="px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 rounded text-xs font-mono badge-purple">ID: {{ item.rowId }}</span>
      <span class="font-semibold item-name" [class.line-through]="item.trips === 0">{{ item.place }}</span>
    </div>
    <div class="flex flex-wrap items-center gap-2 mt-1 text-sm item-meta">
      <span *ngIf="item.trips !== undefined">{{ item.trips }} trips</span>
      <span *ngIf="item.addresses && item.addresses.length > 0">{{ item.addresses.length }} addresses</span>
    </div>
  </div>

  <!-- Name Item -->
  <div *ngIf="itemType === 'name'">
    <div class="flex flex-wrap items-center gap-2">
      <span class="px-2 py-0.5 bg-indigo-100 dark:bg-indigo-900/30 rounded text-xs font-mono badge-indigo">ID: {{ item.rowId }}</span>
      <span class="font-semibold item-name" [class.line-through]="item.trips === 0">{{ item.name }}</span>
    </div>
    <div class="flex flex-col gap-1 mt-1 text-sm">
      <span *ngIf="item.trips !== undefined" class="item-meta">{{ item.trips }} trips</span>
      <div *ngIf="item.addresses && item.addresses.length > 0">
        <span class="font-medium item-meta-header">Addresses:</span>
        <div *ngFor="let address of item.addresses" class="item-meta">â€¢ {{ address }}</div>
      </div>
    </div>
  </div>

  <!-- Service Item -->
  <div *ngIf="itemType === 'service'" class="flex flex-wrap items-center gap-2">
    <span class="px-2 py-0.5 bg-primary-500/20 rounded text-xs font-mono badge-id">ID: {{ item.rowId }}</span>
    <span class="font-semibold item-name" [class.line-through]="item.trips === 0">{{ item.service }}</span>
    <span *ngIf="item.trips !== undefined" class="text-sm item-meta">{{ item.trips }} trips</span>
    <span *ngIf="item.shifts !== undefined" class="text-sm item-meta">{{ item.shifts }} shifts</span>
  </div>

  <!-- Region Item -->
  <div *ngIf="itemType === 'region'" class="flex flex-wrap items-center gap-2">
    <span class="px-2 py-0.5 bg-primary-500/20 rounded text-xs font-mono badge-id">ID: {{ item.rowId }}</span>
    <span class="font-semibold item-name" [class.line-through]="item.trips === 0">{{ item.region }}</span>
    <span *ngIf="item.trips !== undefined" class="text-sm item-meta">{{ item.trips }} trips</span>
    <span *ngIf="item.shifts !== undefined" class="text-sm item-meta">{{ item.shifts }} shifts</span>
  </div>
</div>
