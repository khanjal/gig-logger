<div class="container" id="addTrip">
    <div><app-current-average class="button-right"></app-current-average></div>
    
    <quick-form (parentReload)="load()"></quick-form>

    <h2 *ngIf="unsavedTrips.length > 0">Unsaved Local Trips</h2>
    <div *ngFor="let trip of unsavedTrips" class="mat-card" [ngClass]="trip.exclude == true ? 'mat-card-disabled' : '' ">
        <trips-quick-view [trip]="trip"></trips-quick-view>
        <div mat-card class="row-flex button-bar">
                <button mat-stroked-button type="button" class="button-left" (click)="editUnsavedLocalTrip(trip)"><mat-icon>edit</mat-icon> Edit</button>
                <button mat-stroked-button type="button" (click)="setDropoffTime(trip)" *ngIf="!trip.dropoffTime && !trip.exclude"><mat-icon>schedule</mat-icon> Set Dropoff</button>
                <button mat-stroked-button class="button-right" color="warn" type="button" (click)="confirmDeleteTripDialog(trip)"><mat-icon>delete</mat-icon> Delete</button>
        </div>
    </div>
    <div class="row-grid">
        <button mat-stroked-button color="primary" type="button" class="button" [class.spinner]="saving" [disabled]="saving" (click)="confirmSaveTripsDialog()" *ngIf="unsavedTrips.length > 0"><mat-icon>save</mat-icon> Save Trips to Spreadsheet</button>
    </div>

    <div class="row-grid" *ngIf="savedTrips.length > 0" id="savedLocalTrips">
        <trips-table-simple class="table" title="Saved Local Trips" [trips]="savedTrips"></trips-table-simple>
        <div class="row-block">
            <button mat-stroked-button type="button" [class.spinner]="clearing" [disabled]="clearing"  (click)="confirmUnsaveTripsDialog()"><mat-icon>undo</mat-icon> Unsave Trips</button>
            <button mat-stroked-button class="button-right" color="warn" type="button" [class.spinner]="clearing" [disabled]="clearing"  (click)="confirmClearTripsDialog()"><mat-icon>delete</mat-icon> Clear</button>
        </div>
    </div>

    <div class="row-grid">
        <app-trips-table-group class="table" title="{{defaultSheet?.name}} - Trips" link="{{defaultSheet?.id}}" [trips]="sheetTrips" *ngIf="sheetTrips.length > 0"></app-trips-table-group>
        <button mat-stroked-button color="warn" type="button" class="button" [class.spinner]="reloading" [disabled]="reloading"  (click)="reload()"><mat-icon>refresh</mat-icon> Reload</button>
    </div>

</div>