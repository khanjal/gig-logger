<div class="table-container w-full p-2">
  <h2 class="text-xl font-bold mb-2">{{ name }} Stats</h2>
  <div class="table-responsive overflow-x-auto">
    <!-- Empty state for when no data is available -->
    <div *ngIf="items.length === 0" class="flex flex-col items-center justify-center py-8 text-gray-500">
      <mat-icon class="text-4xl mb-2">info_outline</mat-icon>
      <h3 class="text-lg font-semibold mb-1">No {{ name }} Data</h3>
      <p>There are currently no {{ name?.toLowerCase() }} data available for the selected period.</p>
    </div>
    <!-- Table content when data is available -->
    <div class="overflow-x-auto relative rounded-lg border border-gray-200 bg-white">
      <table *ngIf="items.length > 0" class="min-w-full text-sm">
        <thead class="bg-blue-100">
          <tr>
            <th class="px-3 py-2 text-left font-semibold text-blue-900 whitespace-nowrap">{{ name }}</th>
            <th class="px-3 py-2 text-left font-semibold text-blue-900 whitespace-nowrap">Trips</th>
            <th class="px-3 py-2 text-left font-semibold text-blue-900 whitespace-nowrap">Distance</th>
            <th class="px-3 py-2 text-left font-semibold text-blue-900 whitespace-nowrap">Pay</th>
            <th class="px-3 py-2 text-left font-semibold text-blue-900 whitespace-nowrap">Tips</th>
            <th class="px-3 py-2 text-left font-semibold text-blue-900 whitespace-nowrap">Bonus</th>
            <th class="px-3 py-2 text-left font-semibold text-blue-900 whitespace-nowrap">Total</th>
            <th class="px-3 py-2 text-left font-semibold text-blue-900 whitespace-nowrap">Cash</th>
            <th class="px-3 py-2 text-left font-semibold text-blue-900 whitespace-nowrap">Amt/Time</th>
            <th class="px-3 py-2 text-left font-semibold text-blue-900 whitespace-nowrap">Amt/Trip</th>
            <th class="px-3 py-2 text-left font-semibold text-blue-900 whitespace-nowrap">Amt/Dist</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of items; let i = index" [ngClass]="i % 2 === 0 ? 'bg-blue-50' : 'bg-white'" class="hover:bg-gray-50">
            <td class="px-3 py-2 whitespace-nowrap font-medium text-gray-700">{{item.name | truncate:10}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-gray-600">{{item.trips}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-gray-600">{{item.distance | number}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-green-700">{{item.pay | currency}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-green-700">{{item.tip | currency}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-green-700">{{item.bonus | currency}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-green-800 font-semibold">{{item.total | currency}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-gray-600">{{item.cash | currency}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-blue-700">{{item.amountPerTime | currency}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-blue-700">{{item.amountPerTrip | currency}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-blue-700">{{item.amountPerDistance | currency}}</td>
          </tr>
        </tbody>
        <tfoot class="bg-blue-100">
          <tr>
            <td class="px-3 py-2 font-bold text-blue-900">Total</td>
            <td class="px-3 py-2 font-bold text-blue-900">{{getTotal("trips")}}</td>
            <td class="px-3 py-2 font-bold text-blue-900">{{getTotal("distance") | number}}</td>
            <td class="px-3 py-2 font-bold text-blue-900">{{getTotal("pay") | currency}}</td>
            <td class="px-3 py-2 font-bold text-blue-900">{{getTotal("tip") | currency}}</td>
            <td class="px-3 py-2 font-bold text-blue-900">{{getTotal("bonus") | currency}}</td>
            <td class="px-3 py-2 font-bold text-blue-900">{{getTotal("total") | currency}}</td>
            <td class="px-3 py-2 font-bold text-blue-900">{{getTotal("cash") | currency}}</td>
            <td class="px-3 py-2 font-bold text-blue-900">{{getAverage("amountPerTime") | currency}}</td>
            <td class="px-3 py-2 font-bold text-blue-900">{{getAverage("amountPerTrip") | currency}}</td>
            <td class="px-3 py-2 font-bold text-blue-900">{{getAverage("amountPerDistance") | currency}}</td>
          </tr>
        </tfoot>
      </table>
    </div>
    <!-- Scroll indicator -->
    <div class="table-scroll-indicator absolute right-2 top-1/2 transform -translate-y-1/2" *ngIf="items.length > 0">
      <mat-icon class="text-gray-400">chevron_left</mat-icon>
    </div>
  </div>
</div>