<div class="table-container w-full p-2">
  <h2 class="text-xl font-bold mb-2">{{ name }} Stats</h2>
  <div class="table-responsive overflow-x-auto">
    <!-- Empty state for when no data is available -->
    <div *ngIf="items.length === 0" class="flex flex-col items-center justify-center py-8 text-gray-500 dark:text-gray-400">
      <mat-icon class="text-4xl mb-2">info_outline</mat-icon>
      <h3 class="text-lg font-semibold mb-1">No {{ name }} Data</h3>
      <p>There are currently no {{ name?.toLowerCase() }} data available for the selected period.</p>
    </div>
    <!-- Table content when data is available -->
    <div class="overflow-x-auto relative rounded-lg border border-soft bg-surface">
      <table *ngIf="items.length > 0" class="min-w-full text-sm">
        <thead class="bg-primary-500/20 sticky top-0 z-10">
          <tr>
            <th class="px-3 py-2 text-left font-semibold text-primary whitespace-nowrap bg-primary-500/20">{{ name }}</th>
            <th class="px-3 py-2 text-left font-semibold text-primary whitespace-nowrap bg-primary-500/20">Trips</th>
            <th class="px-3 py-2 text-left font-semibold text-primary whitespace-nowrap bg-primary-500/20">Distance</th>
            <th class="px-3 py-2 text-left font-semibold text-primary whitespace-nowrap bg-primary-500/20">Pay</th>
            <th class="px-3 py-2 text-left font-semibold text-primary whitespace-nowrap bg-primary-500/20">Tips</th>
            <th class="px-3 py-2 text-left font-semibold text-primary whitespace-nowrap bg-primary-500/20">Bonus</th>
            <th class="px-3 py-2 text-left font-semibold text-primary whitespace-nowrap bg-primary-500/20">Total</th>
            <th class="px-3 py-2 text-left font-semibold text-primary whitespace-nowrap bg-primary-500/20">Cash</th>
            <th class="px-3 py-2 text-left font-semibold text-primary whitespace-nowrap bg-primary-500/20">Amt/Time</th>
            <th class="px-3 py-2 text-left font-semibold text-primary whitespace-nowrap bg-primary-500/20">Amt/Trip</th>
            <th class="px-3 py-2 text-left font-semibold text-primary whitespace-nowrap bg-primary-500/20">Amt/Dist</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of items; let i = index" [ngClass]="i % 2 === 0 ? 'bg-primary-500/5' : 'bg-surface'" class="hover:bg-surface-2">
            <td class="px-3 py-2 font-semibold text-primary max-w-[150px] truncate" [title]="item.name">{{item.name}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-secondary">{{item.trips}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-secondary">{{item.distance | number}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-green-700 dark:text-green-400">{{item.pay | currency}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-green-700 dark:text-green-400">{{item.tip | currency}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-green-700 dark:text-green-400">{{item.bonus | currency}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-green-800 dark:text-green-400 font-semibold">{{item.total | currency}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-secondary">{{item.cash | currency}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-primary">{{item.amountPerTime | currency}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-primary">{{item.amountPerTrip | currency}}</td>
            <td class="px-3 py-2 whitespace-nowrap text-primary">{{item.amountPerDistance | currency}}</td>
          </tr>
        </tbody>
        <tfoot class="bg-primary-500/20">
          <tr>
            <td class="px-3 py-2 font-bold text-primary">Total</td>
            <td class="px-3 py-2 font-bold text-primary">{{getTotal("trips")}}</td>
            <td class="px-3 py-2 font-bold text-primary">{{getTotal("distance") | number}}</td>
            <td class="px-3 py-2 font-bold text-primary">{{getTotal("pay") | currency}}</td>
            <td class="px-3 py-2 font-bold text-primary">{{getTotal("tip") | currency}}</td>
            <td class="px-3 py-2 font-bold text-primary">{{getTotal("bonus") | currency}}</td>
            <td class="px-3 py-2 font-bold text-primary">{{getTotal("total") | currency}}</td>
            <td class="px-3 py-2 font-bold text-primary">{{getTotal("cash") | currency}}</td>
            <td class="px-3 py-2 font-bold text-primary">{{getAverage("amountPerTime") | currency}}</td>
            <td class="px-3 py-2 font-bold text-primary">{{getAverage("amountPerTrip") | currency}}</td>
            <td class="px-3 py-2 font-bold text-primary">{{getAverage("amountPerDistance") | currency}}</td>
          </tr>
        </tfoot>
      </table>
    </div>
    <!-- Scroll indicator -->
    <div class="table-scroll-indicator absolute right-2 top-1/2 transform -translate-y-1/2" *ngIf="items.length > 0">
      <mat-icon class="text-gray-400 dark:text-gray-500">chevron_left</mat-icon>
    </div>
  </div>
</div>